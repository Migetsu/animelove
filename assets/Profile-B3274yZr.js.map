{"version":3,"file":"Profile-B3274yZr.js","sources":["../../src/pages/Profile.vue"],"sourcesContent":["<template>\r\n  <main class=\"profile\">\r\n    <div class=\"container\">\r\n      <h1 class=\"profile__title\">Мой профиль</h1>\r\n      <div v-if=\"loading\" class=\"profile__loading\">\r\n        <p>Загрузка данных профиля...</p>\r\n      </div>\r\n      <div v-else-if=\"error\" class=\"profile__error\">\r\n        <p>{{ error }}</p>\r\n        <button @click=\"logout\" class=\"profile__button\">Выйти</button>\r\n      </div>\r\n      <div v-else class=\"profile__content\">\r\n        <p>Вы успешно авторизованы через Shikimori!</p>\r\n        <button @click=\"logout\" class=\"profile__button\">Выйти</button>\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\n\r\nconst router = useRouter();\r\nconst loading = ref(true);\r\nconst error = ref(null);\r\n\r\nonMounted(() => {\r\n  // Проверяем наличие токена\r\n  const token = localStorage.getItem('shikimori_token');\r\n  \r\n  if (!token) {\r\n    error.value = \"Не авторизован. Пожалуйста, войдите через Shikimori.\";\r\n    loading.value = false;\r\n    return;\r\n  }\r\n  \r\n  // Здесь можно сделать запрос к API Shikimori для получения данных профиля\r\n  // Это заглушка, так что просто завершаем загрузку\r\n  setTimeout(() => {\r\n    loading.value = false;\r\n  }, 1000);\r\n});\r\n\r\nfunction logout() {\r\n  localStorage.removeItem('shikimori_token');\r\n  localStorage.removeItem('shikimori_refresh_token');\r\n  localStorage.removeItem('shikimori_token_expires_at');\r\n  router.push('/');\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile {\r\n  margin-top: 100px;\r\n  color: white;\r\n}\r\n\r\n.profile__title {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.profile__content, .profile__loading, .profile__error {\r\n  background-color: #1c1c1c;\r\n  border-radius: 8px;\r\n  padding: 20px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.profile__button {\r\n  margin-top: 15px;\r\n  padding: 8px 16px;\r\n  background: #5e35b1;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n\r\n.profile__error {\r\n  color: #ff5252;\r\n}\r\n</style>\r\n"],"names":["router","useRouter","loading","ref","error","onMounted","logout"],"mappings":"4fAuBA,MAAMA,EAASC,EAAS,EAClBC,EAAUC,EAAI,EAAI,EAClBC,EAAQD,EAAI,IAAI,EAEtBE,EAAU,IAAM,CAId,GAAI,CAFU,aAAa,QAAQ,iBAAiB,EAExC,CACVD,EAAM,MAAQ,uDACdF,EAAQ,MAAQ,GAChB,MACD,CAID,WAAW,IAAM,CACfA,EAAQ,MAAQ,EACjB,EAAE,GAAI,CACT,CAAC,EAED,SAASI,GAAS,CAChB,aAAa,WAAW,iBAAiB,EACzC,aAAa,WAAW,yBAAyB,EACjD,aAAa,WAAW,4BAA4B,EACpDN,EAAO,KAAK,GAAG,CACjB"}